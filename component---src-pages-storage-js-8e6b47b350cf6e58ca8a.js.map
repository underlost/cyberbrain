{"version":3,"sources":["webpack:///./src/components/SiteFields.js","webpack:///./src/components/Nav.js","webpack:///./src/components/LoginWrapper.js","webpack:///./src/pages/storage.js"],"names":["AddFieldNameForm","addFieldName","useState","value","setValue","key","setKey","onSubmit","e","preventDefault","className","id","onChange","target","selected","getCurrentFields","fields","map","fieldname","index","text","type","placeholder","SiteFields","fieldNamesState","setfieldNamesState","useEffect","getCurrentSiteFields","console","log","removeFieldName","newfieldNamesState","splice","saveFields","updateSiteFields","guid","getCurrentUser","FieldNamesInput","disabled","onClick","removeremoveFieldName","createGUID","Nav","role","to","LogginWrapper","children","menuState","setMenuState","isLoggedIn","data-target","state","window","navigate","StoragePage","title"],"mappings":"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","file":"component---src-pages-storage-js-8e6b47b350cf6e58ca8a.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { getCurrentUser, updateSiteFields, getCurrentFields, getCurrentSiteFields, createGUID } from '../util/storage'\n\n// eslint-disable-next-line react/prop-types\nfunction AddFieldNameForm({ addFieldName }) {\n  const [value, setValue] = useState(``)\n  const [key, setKey] = useState(``)\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    if (!value) {\n      return\n    }\n    addFieldName(key, value)\n    setValue(``)\n    setKey(``)\n  }\n  return (\n    <form onSubmit={handleSubmit} className=\"mb-4\">\n      <div className=\"row mb-2\">\n        <div className=\"col-4\">\n          <div className=\"input-group mb-3\">\n            <select className=\"custom-select\" id=\"inputGroupSelect01\" onChange={e => setKey(e.target.value)}>\n              <option selected>Key</option>\n              {getCurrentFields().fields\n                ? getCurrentFields().fields.map((fieldname, index) => (\n                  <option key={index} index={index} value={fieldname.text}>\n                    {fieldname.text}\n                  </option>\n                ))\n                : null}\n            </select>\n          </div>\n        </div>\n        <div className=\"col-8\">\n          <input type=\"text\" className=\"input form-control\" value={value} placeholder=\"Value\" onChange={e => setValue(e.target.value)} />\n        </div>\n      </div>\n\n      <button className=\"btn btn-primary btn-block text-uppercase\">Add new custom Field</button>\n    </form>\n  )\n}\n\nconst SiteFields = () => {\n  const [fieldNamesState, setfieldNamesState] = useState([])\n\n  useEffect(() => {\n    if (getCurrentSiteFields().fields) {\n      setfieldNamesState(getCurrentSiteFields().fields)\n    }\n  }, [])\n\n  console.log(getCurrentSiteFields().fields)\n\n  const addFieldName = (key, value) => {\n    const guid = createGUID()\n    const newfieldNamesState = [\n      ...fieldNamesState,\n      {\n        key,\n        value,\n        guid,\n      },\n    ]\n    setfieldNamesState(newfieldNamesState)\n  }\n\n  const removeFieldName = (index) => {\n    const newfieldNamesState = [...fieldNamesState]\n    newfieldNamesState.splice(index, 1)\n    setfieldNamesState(newfieldNamesState)\n  }\n\n  const saveFields = (e) => {\n    e.preventDefault()\n    updateSiteFields({\n      guid: getCurrentUser().guid,\n      fields: fieldNamesState,\n    })\n  }\n\n  const FieldNamesInput = ({ fieldname, index }) => (\n    <div className=\"row mb-4\">\n      <div className=\"col-3\">\n        <input type=\"text\" className=\"input form-control\" value={fieldname.key} disabled />\n      </div>\n      <div className=\"col-7\">\n        <input type=\"text\" className=\"input form-control\" value={fieldname.value} onChange={saveFields} disabled />\n      </div>\n      <div className=\"col-2\">\n        <button className=\"btn btn-block btn-warning\" onClick={() => removeFieldName(index)}>\n          x\n        </button>\n      </div>\n    </div>\n  )\n\n  return (\n    <>\n      <h6 className=\"h6 text-uppercase\">Current Site Fields</h6>\n      {fieldNamesState ? fieldNamesState.map((fieldname, index) => <FieldNamesInput key={index} index={index} fieldname={fieldname} removeremoveFieldName={removeFieldName} />) : null}\n      <h6>Add New Field</h6>\n      <AddFieldNameForm addFieldName={addFieldName} />\n      <form onSubmit={saveFields}>\n        <button className=\"btn btn-primary btn-block ttext-uppercase\">Save Fields</button>\n      </form>\n    </>\n  )\n}\n\nexport default SiteFields\n\nSiteFields.propTypes = {\n  fieldname: PropTypes.string,\n  index: PropTypes.integer,\n  AddFieldNameForm: PropTypes.func.isRequired,\n}\n","import React from 'react'\nimport { Link } from 'gatsby'\n\nconst Nav = () => (\n  <div className={`site-menu`}>\n    <nav className={`site-nav px-4 px-md-5`} role=\"navigation\">\n      <ul className=\"list-unstyled\">\n        <li className=\"menu-item\">\n          <Link to=\"/\">Home</Link>\n        </li>\n        <li className=\"menu-item\">\n          <Link to=\"/settings\">Settings</Link>\n        </li>\n        <li className=\"menu-item\">\n          <Link to=\"/logout\">Logout</Link>\n        </li>\n        <li className=\"menu-item\">\n          <Link to=\"/fields\">Fields</Link>\n        </li>\n        <li className=\"menu-item\">\n          <Link to=\"/debug\">Debug Menu</Link>\n        </li>\n      </ul>\n    </nav>\n  </div>\n)\n\nexport default Nav\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { isLoggedIn } from '../util/storage'\nimport { navigate } from 'gatsby'\nimport Nav from './Nav'\n\nconst LogginWrapper = ({ children }) => {\n  const [menuState, setMenuState] = useState(`nav-is-closed`)\n  const toggleMenu = () => {\n    setMenuState(state => (state === `nav-is-closed` ? `nav-is-active` : `nav-is-closed`))\n  }\n\n  if (isLoggedIn()) {\n    return (\n      <div id=\"page\" className={`viewport ${menuState}`}>\n        <div className=\"toggle-wrapper\">\n          <button className={`button navbar-toggler`} data-target=\"page-wrap\" onClick={() => toggleMenu()}>\n            <span className={`icon-bar top-bar`} />\n            <span className={`icon-bar middle-bar`} />\n            <span className={`icon-bar middle-bar`} />\n            <span className={`icon-bar bottom-bar`} />\n            <span className={`sr-only`}>Toggle navigation</span>\n          </button>\n        </div>\n        <Nav />\n        <div className=\"loggedIn\">{children}</div>\n      </div>\n    )\n  } else {\n    if (typeof window !== `undefined`) {\n      navigate(`/login`)\n    }\n    return null\n  }\n}\n\nLogginWrapper.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default LogginWrapper\n","import React from 'react'\n\nimport Layout from '../components/layout'\nimport LoginWrapper from '../components/LoginWrapper'\nimport SiteFields from '../components/SiteFields'\nimport SEO from '../components/seo'\n\nconst StoragePage = () => (\n  <LoginWrapper>\n    <Layout>\n      <SEO title=\"Storage Settings\" />\n      <SiteFields />\n    </Layout>\n  </LoginWrapper>\n)\n\nexport default StoragePage\n"],"sourceRoot":""}